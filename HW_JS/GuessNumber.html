<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rubik+Doodle+Shadow&display=swap');

        @import url('https://fonts.googleapis.com/css2?family=Bungee+Spice&family=Rubik+Doodle+Shadow&display=swap');
        body {
            background-color: #000;
            color: #fff;
        }

        .title span:nth-child(1) {
            display: inline-block;
            animation: bounce 1s  infinite;
        }
        .title span:nth-child(2) {
            display: inline-block;
            animation: bounce 1s 0.2s  infinite;
        }
        .title span:nth-child(3) {
            display: inline-block;
            animation: bounce 1s  0.4s infinite;
        }
        .title span:nth-child(4) {
            display: inline-block;
            animation: bounce 1s 0.6s infinite;
        }
        .title span:nth-child(5) {
            display: inline-block;
            animation: bounce 1s 0.8s infinite;
        }
        .title span:nth-child(6) {
            display: inline-block;
            animation: bounce 1s 1s infinite;
        }
        .title span:nth-child(7) {
            display: inline-block;
        }
        .title span:nth-child(8) {
            display: inline-block;
            animation: bounce 1s 1.2s infinite;
        }
        .title span:nth-child(9) {
            display: inline-block;
            animation: bounce 1s 1.4s infinite;
        }
        .title span:nth-child(10) {
            display: inline-block;
            animation: bounce 1s 1.6s infinite;
        }
        .title span:nth-child(11) {
            display: inline-block;
            animation: bounce 1s 1.8s infinite;
        }
        .title span:nth-child(12) {
            display: inline-block;
            animation: bounce 1s 2s infinite;
        }
        .title span:nth-child(13) {
            display: inline-block;
            animation: bounce 1s 2.2s infinite;
        }
        .title span:nth-child(14) {
            display: inline-block;
            animation: bounce 1s 2.4s infinite;
        }
        .title span:nth-child(15) {
            display: inline-block;
            animation: bounce 1s 2.6s infinite;
        }
        .title span:nth-child(16) {
            display: inline-block;
        }
        .title span:nth-child(17) {
            display: inline-block;
            animation: bounce 1s 2.8s infinite;
        }
        .title span:nth-child(18) {
            display: inline-block;
            animation: bounce 1s 3s infinite;
        }
        .title span:nth-child(19) {
            display: inline-block;
            animation: bounce 1s 3.2s infinite;
        }
        .title span:nth-child(20) {
            display: inline-block;
            animation: bounce 1s 3.4s infinite;
        }

        @keyframes bounce {
            0%{transform: translateY(0px);}
            50%{transform: translateY(-10px);}
            100%{transform: translateY(0px);}
        }
        h1.title {
            text-align: center;
            font-family: 'Rubik Doodle Shadow', system-ui;
            font-family: 'Bungee Spice', sans-serif;
            color: rgb(246, 75, 75);
            margin-top: 100px;
            font-weight: 800;
            font-size: 35px;
            text-shadow: -2px -3px 0px #f83e2a;
        }
        .container {
            width: 500px;
            height: 200px;
            text-align: center;
            /* outline: 2px solid red; */
            border: 3px dotted #fff;
        }

        .startAndReset :nth-child(1),
        .startAndReset :nth-child(2),
        .startAndReset :nth-child(3) {
            margin: 10px 7px;
        }
        .inputAndSend {
            /* outline: 2px solid blue; */
            margin: 0px;
        }
        p.result,
        p.description {
            text-align: center;
        }

        input {
            border-radius: 7px;
        }
        input:focus {
            border-color: #000000; 
        }
        .keyboard {
            width: 500px;
            margin: 10px auto;
            border: 3px dotted  #fff;
        }
        .btn-group {
            width: 180px;
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: start;
            margin: 10px auto;
        }
        button.num-btn {
            width: 50px;
            height: 50px;
            background-color: #fff;
            font-weight: 600;
            border-radius: 50%;
            border:7px solid rgb(250, 57, 32);
            box-shadow: 0px 6px 0px rgb(161, 12, 12);
            transition: transform 0.5 linear;
        }
        button.num-btn:hover {
            background-color: #ffe4dd;
        }

        button.num-btn.active {
            background-color: #ffe4dd;
            border: 8px solid rgb(250, 41, 18);
            box-shadow: 0px 5px 0px transparent;
            transform: translateY(6px);   
        }

    </style>
</head>

 <body>
    <h1 class="title">
        <span>N</span>
        <span>u</span>
        <span>m</span>
        <span>b</span>
        <span>e</span>
        <span>r</span>
        <span> </span>
        <span>G</span>
        <span>u</span>
        <span>e</span>
        <span>s</span>
        <span>s</span>
        <span>i</span>
        <span>n</span>
        <span>g</span>
        <span> </span>
        <span>G</span>
        <span>a</span>
        <span>m</span>
        <span>e</span>
    </h1>
    <div class="container">
        <div class="startAndReset">
            <button class="btn btn-outline-warning">StartGame</button>
            <button class="btn btn-outline-danger">Restart</button>
            <button class="btn btn-outline-info">Check Answer</button>
            <div class="inputAndSend">
                <label for="guess">Guess：</label>
                <input type="text" id="guess">
                <button class="send btn btn-outline-success">send</button>
            </div>
            <p class="result"></p>
            <p class="description">Enter StartGame to play !</p>
        </div>
    </div>
    <div class="keyboard">
        <div class="btn-group">
            <button class="num-btn" onclick="activateButton(this)" value="1">1</button>
            <button class="num-btn" onclick="activateButton(this)" value="2">2</button>
            <button class="num-btn" onclick="activateButton(this)" value="3">3</button>
            <button class="num-btn" onclick="activateButton(this)" value="4">4</button>
            <button class="num-btn" onclick="activateButton(this)" value="5">5</button>
            <button class="num-btn" onclick="activateButton(this)" value="6">6</button>
            <button class="num-btn" onclick="activateButton(this)" value="7">7</button>
            <button class="num-btn" onclick="activateButton(this)" value="8">8</button>
            <button class="num-btn" onclick="activateButton(this)" value="9">9</button>
            <button class="num-btn" onclick="activateButton(this)" value="0">0</button>
            <button class="num-btn" onclick="activateButton(this)" ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="16" viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480V396.4c0-4 1.5-7.8 4.2-10.7L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z"/></svg></button>
            <button class="num-btn" onclick="activateButton(this)"><svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M576 128c0-35.3-28.7-64-64-64H205.3c-17 0-33.3 6.7-45.3 18.7L9.4 233.4c-6 6-9.4 14.1-9.4 22.6s3.4 16.6 9.4 22.6L160 429.3c12 12 28.3 18.7 45.3 18.7H512c35.3 0 64-28.7 64-64V128zM271 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"/></svg></button>
            
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <script>
        let answer;
        let min=0;
        let max=100;
        let restart;
        let description;
    
        // 設定遊戲是否已經開始的標誌
        let gameStarted = false;

        function createRandomNumber(){
            return Math.floor(Math.random()*100)+1;
        }
        //開始遊戲邏輯
        function startGame(){
            gameStarted=true;
            answer=createRandomNumber();
            startGamebtn.disabled=true;
            description=document.querySelector('p.description');
            description.innerText=`Start !`;
        }
    
        //讓input讀到所輸入的數字 並 轉成int
        let guessNumber=parseInt(document.getElementById('guess').value);
    
        //判斷邏輯
        function checkGuess() {
            let numberInput = document.getElementById('guess');//選到輸入匡
            //把輸入匡的值給guessNumber
            let guessNumber = parseInt(numberInput.value);
            if(Number.isNaN(guessNumber) || guessNumber<=1 || guessNumber >=100 || guessNumber >max || guessNumber<min){
                alert('Your input is Out of Range or not a number !! Please enter a legal number !');
            }
            else if ( guessNumber === answer) {
                let pResult=document.querySelector('p.result');
                alert(`You Win ! Answer is ${answer}`);
                description.innerText='';
                resetGame();
                pResult.innerText='You Win !';
            }
            else{
                //更新新的範圍
                description = UpdateRange(guessNumber);
                console.log(description);
                document.querySelector('p.description').innerText=`Wrong. Please try again! Range : ${min}~${max}`;
                
            }
            clearInput();
        }

        function UpdateRange(guess){
            if(guess < answer){
                min=guess;
            }
            if(guess>answer){
                max=guess;
            }
            description= document.querySelector('p.description');
            
            description.innerText=`Range : ${min}~${max}`;
            return description;
        }

        //重新開始
        function resetGame(){
            if(gameStarted==false){
                alert(`You didn't start Game!`);
            }
            gameStarted = false;
            startGamebtn.disabled = false;
            min = 0;
            max = 100;
            answer = '';
            document.querySelector('p.result').innerText = '';
            document.querySelector('p.description').innerText = 'Enter StartGame to play !';

        }

        //消掉input輸入匡裡的值
        function clearInput(){
            document.getElementById('guess').value='';
        }
        //看答案
        function showAns(){
            if(answer == undefined || answer==''){
                alert(`You didn't start Game!`);
            }
            else{
                alert(`Answer is ${answer}`);
            }
            
        }

        //替開始按鈕註冊點擊事件
        let startGamebtn=document.querySelector('.startAndReset :nth-child(1)');

        startGamebtn.addEventListener('click',startGame);
        
        //替看答案按鈕註冊點擊事件
        let ansBtn=document.querySelector('.startAndReset :nth-child(3)');
        ansBtn.addEventListener('click',showAns);

        //替重新開始按鈕註冊點擊事件
        let resetBtn=document.querySelector('.startAndReset :nth-child(2)');
        resetBtn.addEventListener('click',resetGame);

        //替send按鈕註冊事件
        let sendBtn=document.querySelector('button.send');
        sendBtn.addEventListener('click',checkGuess);
        //新增keydown事件
        document.addEventListener('keydown',(event)=>{
            if(event.key === 'Enter' || event.keyCode === 13){
                checkGuess();
            }
        });

        let btnGroup=document.querySelectorAll('.btn-group');
        function numberBtnClick (){
            btnGroup=document.querySelectorAll('.btn-group');
            let guessNumber=document.getElementById('guess');
            btnGroup.forEach((item)=>{
                item.addEventListener('click',()=>{
                    guessNumber.value+=item.value;
                })
            })
            let btn1=document.querySelector('btn-group :nth-child(1)');
            btn1.addEventListener('click',numberBtnClick);

        }
        guessNumber=document.getElementById('guess');

        function activateButton(button) {
            if(gameStarted == false){
                alert(`You didn't start game.`);
            }else{
                button.classList.add('active');
                guessNumber.value+=button.value;
            }
            
            setTimeout(function(){
                button.classList.remove('active')
            },150);
        }

        let btnSend=document.querySelector('.btn-group :nth-child(11)');
        btnSend.addEventListener('click',checkGuess);
        let removeButton = document.querySelector('.btn-group :nth-child(12)');
        removeButton.addEventListener('click',()=>{
            guessNumber.value = guessNumber.value.slice(0,-1);
        });
    </script>
  </body>
</html>